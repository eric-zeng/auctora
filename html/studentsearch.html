<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<html>
	<head>
		<title>Auctora</title>
		<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
		<link rel="stylesheet" href="../css/questions.css">

		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="../css/bootstrap.min.css">


	</head>

	<body>
		Student name:
		<input id="input" list="students" />
		<datalist id="students">
			<option value="Internet Explorer" id="1">
		  <option value="Firefox" id="5">
		  <option value="Chrome" id="4">
		  <option value="Opera" id="3">
		  <option value="Safari" id="2">
		</datalist>
		<button onclick="selectStudent()" id="selectStudent" type="submit" >Submit</button>

		<div id="sProfile">
			<ul id="resumeList">

			</ul>
		</div>


		<form action=".."> 
			See Your Students 
			<input type="submit">
		</form>


		<script>

			function selectStudent() {
					var s = document.getElementById("students");
					var input =document.getElementById("input");
					var id;
					for (var i = 0; s.options.length; i++) {
						if (s.options[i].value == input.value) {
							id = s.options[i].id;
							break;
						}
					}

					var id = this.id;
          var xml = new XMLHttpRequest();
        
          xml.open("GET","http://tidy-nomad-842.appspot.com/profileRequest?id=" + id, true);
          xml.responseType = "JSON";
          xmlhttp.onload = function(e) {
          	var arr = JSON.parse(xmlhttp.response);
            var list = document.getElementById("resumeList");
            
            for (var key in arr) {
            	var name = document.createElement("li"); 
            	name.innerHTML = arr[key];
            	list.appendChild(name);
            }
          }
			}
			
			window.onload = function() {
				document.getElementById("selectStudent").onClick = selectStudent;

	    	var xmlhttp = new XMLHttpRequest();
	    	xmlhttp.open("GET","http://tidy-nomad-842.appspot.com/nameRequest",true);
	    	xmlhttp.responseType = "JSON";
	    	xmlhttp.onload = function(e) {
	    		var arr = JSON.parse(xmlhttp.response);
	    		console.log(arr); // TODO: delete
	    		var students = document.getElementById("students");
	    		
	    		for (var i = 0; i < arr.length; i++) {
	    			for (var key in arr) {
            	var node = document.createElement("option");
							node.value = studentName;
							node.id = studentId;
							students.appendChild(node);
            }
	    		}
	    			
	    	}
				xmlhttp.send();



			}	
		</script>
	</body>

</html>